knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
library(srvyr)
tinytex::install_tinytex()
def.chunk.hook  <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
x <- def.chunk.hook(x, options)
ifelse(options$size != "normalsize", paste0("\n \\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})
#Data Cleaning and Preprocessing
install.packages("readxl")
library("readxl")
library("tidyverse")
data <- read_excel("data.xlsx")
View(data)
#Data Cleaning and Preprocessing
install.packages("readxl")
library("readxl")
library("tidyverse")
data <- read_excel("data.xlsx")
keeps <- c("reportyear", "race_eth_code","county_name", "region_name", "strata_one_name","numerator","denominator","estimate","LL_95CI","UL_95CI","se", "rse","ca_rr","vap")
data <- data[keeps]
install.packages("readxl")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
library(srvyr)
tinytex::install_tinytex()
data <- data[keeps]
keeps <- c("reportyear", "race_eth_code","county_name", "region_name", "strata_one_name","numerator","denominator","estimate","LL_95CI","UL_95CI","SE", "RSE","CA_RR","vap")
data <- data[keeps]
#Data Cleaning and Preprocessing
install.packages("readxl")
library("readxl")
library("tidyverse")
data <- read_excel("data.xlsx")
keeps <- c("reportyear", "race_eth_code","county_name", "region_name", "strata_one_name","numerator","denominator","estimate","LL_95CI","UL_95CI","SE", "RSE","CA_RR","vap")
data <- data[keeps]
cps_svy <- as_survey_design(data)
data %>%
group_by(reportyear = 2016) %>%
filter(estimate = "No data") %>%
View(cps_svy)
data %>%
filter(reportyear = 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
counties = survey_prop()
)
data %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
counties = survey_prop()
)
data %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
counties = survey_mean()
)
#Data Cleaning and Preprocessing
install.packages("readxl")
library("readxl")
library("tidyverse")
data <- read_excel("data.xlsx")
keeps <- c("reportyear", "race_eth_code","county_name", "region_name", "strata_one_name","numerator","denominator","estimate","LL_95CI","UL_95CI","SE", "RSE","CA_RR","vap")
data <- data[keeps]
cps_svy <- as_survey_design(data)
data %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
n = unweighted(n())
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
n = unweighted(n())
)
View(data)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = unweighted(n())
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = sum(vap)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2018) %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
library("dplyr")
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(county_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = survey_total(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(county_name = Nevada) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = survey_total(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(county_name == Nevada) %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = survey_total(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(county_name == "Nevada") %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = survey_total(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(strata_one_name == "Voter Participation") %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = survey_total(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(strata_one_name == "Voter Participation") %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(strata_one_name == "Voter Participation") %>%
filter(estimate != 'No data') %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(strata_one_name == "Voter Participation") %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
cps_svy %>%
filter(reportyear == 2016) %>%
filter(strata_one_name == "voter participation") %>%
group_by(region_name) %>%
summarize(
n = sum(vap, na.rm = FALSE)
)
data %>%
drop_na()
data <- data[!(data == "No data")]
data %>% replace_with_na(replace = list(x = "No data"))
library("tidyverse")
data %>% replace_with_na(replace = list(x = "No data"))
data %>% na_if("No data")
View(data)
data %>% mutate(across(where(is.character), ~na_if(., "No data")))
data <- data %>% mutate(across(where(is.character), ~na_if(., "No data")))
View(data)
data <- na.omit(data)
